const navigatorErrorMessage="Could not find `userAgent` or `userAgentData` window.navigator properties to set `os`, `browser` and `version`",removeExcessMozillaAndVersion=/^mozilla\/\d\.\d\W/,browserPattern=/(\w+)\/(\d+\.\d+(?:\.\d+)?(?:\.\d+)?)/g,engineAndVersionPattern=/^(ver|cri|gec)/,brandList=["chrome","opera","safari","edge","firefox"],unknown="Unknown",empty="",{isArray}=Array;let userAgentData=window.navigator.userAgentData,userAgent=window.navigator.userAgent;const mobiles={iphone:/iphone/,ipad:/ipad|macintosh/,android:/android/},desktops={windows:/win/,mac:/macintosh/,linux:/linux/},detectPlatform=(e,t)=>{if(userAgent=typeof e=="string"?e:userAgent,userAgentData=typeof t=="string"?t:userAgentData,userAgent){const t=userAgent.toLowerCase().replace(removeExcessMozillaAndVersion,empty),i=Object.keys(mobiles).find(e=>mobiles[e].test(t)&&window.navigator.maxTouchPoints>=1),a=Object.keys(desktops).find(e=>desktops[e].test(t)),r=i||a,e=t.match(browserPattern),c=/version\/(\d+(\.\d+)*)/,s=t.match(c),o=isArray(s)?s[1]:null,l=e&&(e.length>2&&!engineAndVersionPattern.test(e[1])?1:0),n=e&&e[e.length-1-(l||0)].split("/"),d=n&&n[0],u=o||n&&n[1];return{os:r,browser:d,version:u}}if(userAgentData){const t=userAgentData.platform.toLowerCase();let e;for(const t of userAgentData.brands){const s=t.brand.toLowerCase(),n=brandList.find(e=>{if(s.includes(e))return e});if(n){e={browser:n,version:t.version};break}}const n=e||{browser:unknown,version:unknown};return{os:t,...n}}return console.error(navigatorErrorMessage),{os:navigator.platform||unknown,browser:unknown,version:unknown}};export default detectPlatform